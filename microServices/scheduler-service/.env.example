# ==================================================
# Scheduler Service 環境變數配置檔案
# ==================================================

# Node.js 環境
NODE_ENV=development

# 服務設定
PORT=3001
SERVICE_NAME=scheduler-service

# 日誌設定
LOG_LEVEL=info

# CORS 設定
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ==================================================
# 資料庫設定 (MySQL)
# ==================================================

# Drone 服務資料庫
DB_HOST=aiot-drone-mysql
DB_PORT=3307
DB_USER=admin
DB_PASSWORD=admin
DB_NAME=drone_db

# 資料庫連線池設定
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# ==================================================
# RabbitMQ 設定
# ==================================================

RABBITMQ_URL=amqp://admin:admin@aiot-rabbitmq:5672/
RABBITMQ_PREFETCH=10
RABBITMQ_RECONNECT_DELAY=5000
RABBITMQ_MAX_RECONNECT_ATTEMPTS=10

# ==================================================
# Redis 設定
# ==================================================

REDIS_URL=redis://aiot-redis:6379/0
REDIS_HOST=aiot-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ==================================================
# 排程設定
# ==================================================

# 歸檔設定
ARCHIVE_DATA_RETENTION_DAYS=1
ARCHIVE_CLEANUP_DELAY_DAYS=7
ARCHIVE_DEFAULT_BATCH_SIZE=1000

# Cron 表達式
CRON_ARCHIVE_DAILY=0 2 * * *
CRON_CLEANUP_EXPIRED=0 4 * * *
CRON_MAINTENANCE_WEEKLY=0 3 * * 0
CRON_HEALTH_CHECK_HOURLY=0 * * * *

# 時區設定
TIMEZONE=Asia/Taipei

# ==================================================
# 監控設定
# ==================================================

# 效能閾值
THRESHOLD_CPU_WARNING=70
THRESHOLD_CPU_CRITICAL=90
THRESHOLD_MEMORY_WARNING=80
THRESHOLD_MEMORY_CRITICAL=95
THRESHOLD_DISK_WARNING=85
THRESHOLD_DISK_CRITICAL=95
THRESHOLD_TASK_FAILURE_WARNING=10
THRESHOLD_TASK_FAILURE_CRITICAL=25

# 監控間隔 (秒)
MONITOR_METRICS_INTERVAL=60
MONITOR_HEALTH_CHECK_INTERVAL=30

# ==================================================
# 安全設定
# ==================================================

# JWT 設定 (如果需要認證)
JWT_SECRET=your-jwt-secret-key
JWT_EXPIRES_IN=24h

# API 限制
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=1000

# ==================================================
# 其他設定
# ==================================================

# 併發限制
CONCURRENCY_LIMIT=3

# 重試設定
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY=300000
RETRY_BACKOFF_MULTIPLIER=2

# 清理設定
CLEANUP_BATCH_DELAY_MS=100
CLEANUP_MAX_EXECUTION_HOURS=2

# 日誌檔案設定
LOG_DIR=./logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14